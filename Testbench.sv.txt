`include "interface.sv"
`include "test.sv"

module tb;

  bit PCLK; //global sig.
  test t1;  //handle
  intf inf(PCLK);

apb_slave dut (
    .PCLK    (inf.PCLK),
    .PRESETn (inf.PRESETn),
    .PSEL    (inf.PSEL),
  .PENABLE (inf.PENABLE), //PENABLE
    .PWRITE  (inf.PWRITE),
    .PADDR   (inf.PADDR),
    .PWDATA  (inf.PWDATA),
    .PRDATA  (inf.PRDATA),
    .PSLVERR (inf.PSLVERR),
    .PREADY  (inf.PREADY)
  );

  initial begin
   // PCLK = 0;
      forever #5 PCLK = ~PCLK;  
  end
  
  initial begin
    t1=new(inf);
    t1.run();
  end

  
  initial begin
    $dumpfile("dump.vcd");
    $dumpvars(0, tb);
    $display("Simulation Start");
    #5000;
    $display("Simulation End");
    $finish;
    
  end

endmodule
